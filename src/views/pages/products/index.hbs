<div class="mb-6 flex justify-between items-center">
  <div>
    <h1 class="text-2xl font-bold text-slate-900 dark:text-white">Gestión de Productos</h1>
    <p class="text-sm text-slate-500">Administra el catálogo de items para donaciones.</p>
  </div>
  <a href="/products/new" class="btn-primary flex items-center gap-2">
    <span>+</span> Nuevo Producto
  </a>
</div>

<div class="card overflow-hidden">
  <div class="overflow-x-auto">
    <table class="min-w-full text-left text-sm whitespace-nowrap">
      <thead
        class="bg-slate-50 dark:bg-slate-700 text-slate-600 dark:text-slate-200 uppercase tracking-wider font-semibold border-b border-slate-200 dark:border-slate-600">
        <tr>
          <th scope="col" class="px-6 py-3">Nombre</th>
          <th scope="col" class="px-6 py-3">Código</th>
          <th scope="col" class="px-6 py-3">Unidad</th>
          <th scope="col" class="px-6 py-3">Estado</th>
          <th scope="col" class="px-6 py-3 text-right">Acciones</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-100 dark:divide-slate-700">
        {{#each products}}
        <tr class="hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors">
          <td class="px-6 py-4 font-medium text-slate-900 dark:text-white">
            {{this.name}}
          </td>
          <td class="px-6 py-4 font-mono text-xs text-slate-500">
            {{#if this.barcode}}{{this.barcode}}{{else}}-{{/if}}
          </td>
          <td class="px-6 py-4 text-slate-500">
            {{this.unit}}
          </td>
          <td class="px-6 py-4">
            <span
              class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                            {{#if this.active}}bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200{{else}}bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300{{/if}}">
              {{#if this.active}}Activo{{else}}Inactivo{{/if}}
            </span>
          </td>
          <td class="px-6 py-4 text-right flex justify-end gap-3">
            <a href="/products/{{this.id}}/edit" class="text-primary-600 hover:text-primary-900 font-medium">Editar</a>
            <!-- Form for delete -->
            <form action="/products/{{this.id}}/delete" method="POST"
              onsubmit="return confirm('¿Estás seguro de eliminar este producto?');" class="inline">
              <input type="hidden" name="_csrf" value="{{../csrfToken}}">
              <button type="submit" class="text-red-600 hover:text-red-900 font-medium">
                Eliminar
              </button>
            </form>
          </td>
        </tr>
        {{else}}
        <tr>
          <td colspan="4" class="px-6 py-12 text-center text-slate-500">
            No hay productos registrados.
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>
</div>